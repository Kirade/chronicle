# Daily Learning: 2025-01-19

## 📚 What I Learned Today
- URL 단축기 설계
    - 긴 URL 을 짧은 URL 로 변경해 주는 기능을 설계한다.
    - 만약 이 기능을 제공하는 시스템을 설계하기 위해서는 현재 요구조건들을 파악할 수 있어야 하는데, 읽기 / 쓰기의 트래픽 규모가 어떠한지, URL 의 길이는 어떠해야하는지, URL 정보의 관리가 어떤식으로 진행되어야 하는지에 대해 파악이 필요하다.
    - 쓰기 / 읽기 트래픽의 양을 통해서 어떤 기간동안 필요한 저장 용량을 산정해볼 수 있다.
    - 보통 API 를 통해 이런 기능들을 제공하게 되고, 두 가지 정도의 API 를 제공할 수 있다.
        - Long URL 을 Short URL 로 변경해주는 API
        - Short URL 을 통해 원래 Long URL 로 리다이렉트 시키는 API
    - 리다이렉팅 과정에 HTTP Status Code 중 3xx 번 대역의 코드를 사용한다. 301 을 활용하면 이후 클라이언트가 캐싱을 통해 동일한 요청을 여러번 수행하지 않게하여 서버의 성능상 이점을 줄 수 있다. 302 를 활용하면 캐싱이 되진 않지만 트래픽 분석에 용이하다.

    - URL 단축 기능 자체는 여러가지 방법으로 구현할 수 있다. 가장 먼저 떠오르는 방법은 보통 해싱이다. 원본 URL 을 전달하면 이에 걸맞는 Short URL 의 식별자를 반환하는 해시 함수를 설계해낼 수 있을것이다.
    - 트래픽과 서비스의 예상 운영기간 등을 고려하여 URL 의 식별자의 길이를 선정해야 한다. 숫자, 영어 소문자, 영어 대문자 세 가지를 활용한다고 하면 총 62개의 글자로 자릿수 n 에 따라 62^n 개의 식별자 조합을 만들어 낼 수 있다. 이 n 값을 시스템 요구사항에 맞춰 조절하고 결정된 겨로가에 따라 해시 함수가 반환할 함수 결과값의 최대 길이를 조정할 수 있다.
    - 해싱은 충돌이 발생할 수 있다. 충돌이 발생하면 다른 값으로 해싱 함수를 재실행하는 행동의 반복을 통해 오버헤드가 있을 수 있다.
    - 충돌을 피하기위한 방법으로 N진법을 활용해볼 수 있다. 데이터베이스 내에서 유일한 ID 를 생성해내고 ID 를 N진법으로 변환한뒤 이 값을 식별자로 사용하는 방식이다. 값의 변화가 예측 가능하기 때문에 보안적인 측면에서는 좋지 않을 수 있으나 충돌이 발생할 수 없어 해싱에 비해 오버헤드가 적다.
