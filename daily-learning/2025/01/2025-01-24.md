# Daily Learning: 2025-01-24

## 📚 What I Learned Today
- 웹 크롤러 설계
    - 검색 엔진 인덱싱, 웹 아카이빙, 웹 마이닝, 웹 모니터링 등의 용도로 사용된다.
    - 크롤러 시스템은 설계에 따라 팀을 꾸려서 관리해야할 정도로 복잡해 질 수 있다.
    - 선행 연구에서 제안한 웹 크롤러 구조
        - 시작 URL 집합
            - 웹 크롤러가 크롤링을 시작하는 시작점이다. 크롤러가 수집하려는 웹 페이지의 종류, 범위 등에 따라서 시작 URL 을 잘 정해주어야 한다. 예를 들어 어떤 대학 홈페이지의 내용을 크롤링 한다라고 하면 대학 홈페이지 도메인이 붙은 URL 들이 시작 URL 이 될 수 있다.
        - 미수집 URL 저장소
            - 아직 웹 페이지를 다운로드 하지않은 URL 들을 모아둔 것이다. 일반적으로 FIFO 큐 처럼 동작한다.
        - HTML 다운로더
            - 주어진 URL 에 대한 웹 페이지를 다운로드 하는 기능이다.
        - 도메인 이름 변환기
            - 웹 페이지를 다운로드하기 위해서는 URL 의 IP 주소를 식별해내야한다. 이 기능을 제공한다.
        - 콘텐츠 파서
            - 다운로드 받은 웹 페이지를 파싱하고 검증하는 기능을 제공한다.
        - 콘텐츠 저장소
            - HTML 문서를 보관하는 시스템이다. 적절한 수준의 저장소 스펙을 정해야한다. 데이터 양이 많은 경우 대부분의 데이터를 디스크에 두고 접근이 잦은 콘텐츠를 메모리의 두는 식의 설계를 할 수 있다.
        - URL 필터
            - 예외 처리한 확장자, URL 등에 대한 처리나 오류 발생 가능성이 있는 URL 등을 식별해낸다.
        - URL 저장소
            - 이미 방문한 URL 을 보관하는 저장소이다.

    - DFS, BFS
        - 크롤링에서는 DFS 를 채택하는 경우 그 깊이가 얼마나 깊을지 가늠하기 어려워 BFS 를 많이 사용한다.
        - BFS 를 통해 여러 URL 에 대한 병렬 요청을 하는 경우 무례한 크롤러 문제가 발생할 수 있다. 동일한 서버에 병렬 요청으로 부하를 가져올 수 있기 떄문이다.
        - 또한 같은 도메인의 URL 이라도 우선순위가 존재할 수 있어서 관리가 필요하다.
    - 미수집 URL 저장소
        - 예의를 갖춘 크롤러, 우선순위나 신선도를 구별하는 크롤러를 구현의 도움을 줄 수 있다. 큐 라우팅을 통해 같은 호스트에 속한 URL 을 동일한 큐로 라우팅하여 여러 크롤러가 동일 호스트에 동시요청을 발생시키지 않도록 방지할 수 있다.
        - 우선순위가 필요한 경우에도 마찬가지, 우선순위가 나뉜 큐 여러개를 두고 우선순위에 따라 URL 을 분리해서 전달하면 큐 선택기에서 우선순위가 높은 큐를 더 자주 선택하는 방식으로 우선순위에 따른 크롤링을 지원할 수 있다.
        - 위 두가지를 합쳐서 우선순위와 예의를 갖출 수 있게 URL 별로 크롤러에 분배되는 방식을 조절할 수 있다.
    - HTML 다운로더
        - Robots.txt 로봇 제외 프로토콜, 웹사이트와 크롤러가 소통하는 표준방법이다. 규칙들이 파일 안에 나열되어 있다.
        - 성능 최적화를 위해 분산 크롤링, 도메인 이름 캐싱, 지역성 보장, 타임아웃 설정등을 할 수 있다.
        - 안정성을 위해 서버들이 늘어나고 줄어들때 안정 해싱을 도입할 수 있고, 크롤러의 상태들을 수집하여 장애시 복구하는데 도움을 줄 수 있다.
