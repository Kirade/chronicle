# SwiftUI Property Wrapper ì™„ë²½ ê°€ì´ë“œ

## ğŸ“š í•™ìŠµ ë‚ ì§œ: 2025.08.30

## 1. Property Wrapperë€?

Property WrapperëŠ” ë³€ìˆ˜ì— "íŠ¹ë³„í•œ ëŠ¥ë ¥"ì„ ë¶€ì—¬í•˜ëŠ” Swiftì˜ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

```swift
// ì¼ë°˜ ë³€ìˆ˜
private var normalItem: String = ""

// Property Wrapperë¥¼ ì‚¬ìš©í•œ ë³€ìˆ˜
@State private var item: String = ""  // ê°’ì´ ë³€ê²½ë˜ë©´ Viewë¥¼ ë‹¤ì‹œ ê·¸ë¦¼
```

### í•µì‹¬ íŠ¹ì§•
- `@` ê¸°í˜¸ë¡œ ì‹œì‘
- ë³€ìˆ˜ì˜ ì €ì¥ê³¼ ì ‘ê·¼ ë°©ì‹ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- SwiftUIì—ì„œ Viewì™€ ë°ì´í„°ë¥¼ ì—°ê²°í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜

## 2. SwiftUI Viewì˜ ë™ì‘ ì›ë¦¬

### ViewëŠ” ë¶ˆë³€(Immutable) êµ¬ì¡°ì²´

```swift
struct TestView: View {
    // âŒ ì»´íŒŒì¼ ì—ëŸ¬: struct ë‚´ë¶€ì—ì„œ ì§ì ‘ ê°’ ë³€ê²½ ë¶ˆê°€
    private var counter: Int = 0

    var body: some View {
        Button("ì¦ê°€") {
            counter += 1  // Error: Cannot assign to property
        }
    }
}
```

### SwiftUIì˜ ë Œë”ë§ ì‚¬ì´í´

```
1. @State ê°’ ë³€ê²½
   â†“
2. SwiftUIê°€ ë³€ê²½ ê°ì§€
   â†“
3. body ë‹¤ì‹œ í˜¸ì¶œ
   â†“
4. ì´ì „ Viewì™€ ìƒˆ View ë¹„êµ
   â†“
5. ë³€ê²½ëœ ë¶€ë¶„ë§Œ í™”ë©´ ì—…ë°ì´íŠ¸
```

### Viewì™€ State Storageì˜ ë¶„ë¦¬

```
View Struct (ì„ì‹œ, ê°€ë²¼ì›€)
    â†“ ì°¸ì¡°
State Storage (ì˜êµ¬ì , SwiftUIê°€ ê´€ë¦¬)
    - ì‹¤ì œ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³³
    - Viewê°€ ì¬ìƒì„±ë˜ì–´ë„ ê°’ ìœ ì§€
```

## 3. ì£¼ìš” Property Wrapper ìƒì„¸ ë¶„ì„

### @State

**ëª©ì **: Viewê°€ ì†Œìœ í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë¡œì»¬ ìƒíƒœ

```swift
@State private var text: String = "Hello"
@State private var count: Int = 0
```

**íŠ¹ì§•**:
- ì´ˆê¸°ê°’ í•„ìˆ˜
- View ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©
- ê°’ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ View ì—…ë°ì´íŠ¸
- `$` í”„ë¦¬í”½ìŠ¤ë¡œ ì–‘ë°©í–¥ ë°”ì¸ë”© ì œê³µ

**ë‚´ë¶€ ë™ì‘**:
```swift
// @StateëŠ” ì‹¤ì œë¡œ 3ê°€ì§€ ì ‘ê·¼ ë°©ë²• ì œê³µ
@State private var counter = 0

// 1. counter â†’ ì‹¤ì œ ê°’ (Int)
// 2. _counter â†’ State<Int> wrapper ì¸ìŠ¤í„´ìŠ¤
// 3. $counter â†’ Binding<Int> ì–‘ë°©í–¥ ë°”ì¸ë”©
```

### @Environment

**ëª©ì **: ì‹œìŠ¤í…œì´ë‚˜ ë¶€ëª¨ Viewê°€ ì œê³µí•˜ëŠ” í™˜ê²½ ê°’ ì ‘ê·¼

```swift
@Environment(\.modelContext) private var modelContext
@Environment(\.dismiss) private var dismiss
@Environment(\.colorScheme) private var colorScheme
```

**íŠ¹ì§•**:
- KeyPathë¥¼ í†µí•´ ì›í•˜ëŠ” ê°’ ì§€ì •
- ì´ˆê¸°ê°’ ì„¤ì • ë¶ˆê°€ (ì‹œìŠ¤í…œì´ ì œê³µ)
- ê´„í˜¸ ì•ˆì— KeyPath ì „ë‹¬

**KeyPath ë¬¸ë²•**:
```swift
// \.modelContextëŠ” KeyPath<EnvironmentValues, ModelContext>ë¥¼ ì˜ë¯¸
// ë°±ìŠ¬ë˜ì‹œ(\)ì™€ ì (.)ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” íŠ¹ë³„í•œ ë¬¸ë²•
```

### @Query

**ëª©ì **: SwiftDataì—ì„œ ìë™ìœ¼ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

```swift
@Query private var items: [Item]
@Query(sort: \.timestamp) private var sortedItems: [Item]
```

**íŠ¹ì§•**:
- ì´ˆê¸°ê°’ ë¶ˆí•„ìš” (ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ ì œê³µ)
- ë°ì´í„° ë³€ê²½ ì‹œ ìë™ ì—…ë°ì´íŠ¸
- ì •ë ¬, í•„í„° ë“± ì˜µì…˜ ê°€ëŠ¥

### @FocusState

**ëª©ì **: í…ìŠ¤íŠ¸ í•„ë“œì˜ í¬ì»¤ìŠ¤ ìƒíƒœ ê´€ë¦¬

```swift
// Bool ë°©ì‹ (ë‹¨ì¼ í•„ë“œ)
@FocusState private var isFocused: Bool

// Enum ë°©ì‹ (ë‹¤ì¤‘ í•„ë“œ)
enum Field {
    case username
    case password
}
@FocusState private var focusedField: Field?
```

**íŠ¹ì§•**:
- Bool ë˜ëŠ” Optional Enum íƒ€ì…
- í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì œì–´
- nil = í¬ì»¤ìŠ¤ í•´ì œ (í‚¤ë³´ë“œ ìˆ¨ê¹€)

**ì‚¬ìš© ì˜ˆì œ**:
```swift
TextField("Username", text: $username)
    .focused($focusedField, equals: .username)

Button("í‚¤ë³´ë“œ ìˆ¨ê¸°ê¸°") {
    focusedField = nil  // í¬ì»¤ìŠ¤ í•´ì œ
}
```

## 4. Property Wrapper ì´ˆê¸°í™” íŒ¨í„´

### íŒ¨í„´ 1: ì´ˆê¸°ê°’ ì§ì ‘ í• ë‹¹
```swift
@State private var text: String = "Hello"
// ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ init(wrappedValue:) í˜¸ì¶œ
```

### íŒ¨í„´ 2: íŒŒë¼ë¯¸í„° ì „ë‹¬
```swift
@Environment(\.modelContext) private var context
// init(_ keyPath:) í˜¸ì¶œ
```

### íŒ¨í„´ 3: ë³µí•© ì´ˆê¸°í™”
```swift
// ì»¤ìŠ¤í…€ Property Wrapper ì˜ˆì œ
@propertyWrapper
struct Limited {
    init(wrappedValue: String = "", _ maxLength: Int) {
        // wrappedValueì™€ ì¶”ê°€ íŒŒë¼ë¯¸í„° ëª¨ë‘ ë°›ìŒ
    }
}

@Limited(10) var text: String = "Hello"  // ì´ˆê¸°ê°’ê³¼ ì œí•œ ê¸¸ì´
```

## 5. ì‹¤ì „ ì˜ˆì œ ë¶„ì„

### ì œê³µëœ Grocery List ì•± ì½”ë“œ

```swift
struct ContentView: View {
    // ì‹œìŠ¤í…œ í™˜ê²½ì—ì„œ ModelContext ê°€ì ¸ì˜¤ê¸°
    @Environment(\.modelContext) private var modelContext

    // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ Item ëª©ë¡ ìë™ ì¡°íšŒ
    @Query private var items: [Item]

    // ì‚¬ìš©ì ì…ë ¥ì„ ìœ„í•œ ë¡œì»¬ ìƒíƒœ
    @State private var item: String = ""

    // TextField í¬ì»¤ìŠ¤ ê´€ë¦¬
    @FocusState private var isFocused: Bool

    var body: some View {
        // ...
        TextField("", text: $item)  // $ë¡œ ì–‘ë°©í–¥ ë°”ì¸ë”©
            .focused($isFocused)     // í¬ì»¤ìŠ¤ ìƒíƒœ ì—°ê²°

        Button {
            // ë²„íŠ¼ ì•¡ì…˜ì—ì„œ í¬ì»¤ìŠ¤ í•´ì œ
            isFocused = false
        }
    }
}
```

## 6. í•µì‹¬ ê°œë… ì •ë¦¬

### View Protocolê³¼ some View

```swift
struct MyView: View {  // View í”„ë¡œí† ì½œ ì±„íƒ
    var body: some View {  // ê³„ì‚° í”„ë¡œí¼í‹°
        Text("Hello")      // ì‹¤ì œ ë°˜í™˜ íƒ€ì…ì€ Text
    }
}
```

- `some View`: "ì–´ë–¤ View íƒ€ì…ì¸ë°, ì»´íŒŒì¼ëŸ¬ê°€ ì¶”ë¡ "
- ë³µì¡í•œ View ì¡°í•©ì˜ íƒ€ì…ì„ ê°„ë‹¨í•˜ê²Œ í‘œí˜„

### $ í”„ë¦¬í”½ìŠ¤ì˜ ì˜ë¯¸

```swift
@State private var text = ""

// text â†’ String (ì‹¤ì œ ê°’)
// $text â†’ Binding<String> (ì–‘ë°©í–¥ ë°”ì¸ë”©)

TextField("", text: $text)  // TextFieldê°€ ê°’ì„ ì½ê³  ì“¸ ìˆ˜ ìˆìŒ
```

### nil in Optional FocusState

```swift
@FocusState private var field: Field?

// nilì˜ ì˜ë¯¸:
// - "ìš°ë¦¬ê°€ ê´€ë¦¬í•˜ëŠ” í•„ë“œ ì¤‘ ì•„ë¬´ê²ƒë„ í¬ì»¤ìŠ¤ë˜ì§€ ì•Šì€ ìƒíƒœ"
// - í‚¤ë³´ë“œ ìˆ¨ê¸°ê¸°
// - ê´€ë¦¬ ëŒ€ìƒì´ ì•„ë‹Œ í•„ë“œê°€ í¬ì»¤ìŠ¤ë¥¼ ë°›ì€ ê²½ìš°
```

## 7. í•™ìŠµ ìš”ì•½

### Property Wrapperê°€ í•´ê²°í•˜ëŠ” ë¬¸ì œë“¤

1. **ìƒíƒœ ê´€ë¦¬**: ViewëŠ” ë¶ˆë³€ì´ì§€ë§Œ ìƒíƒœëŠ” ë³€ê²½ ê°€ëŠ¥í•´ì•¼ í•¨
2. **ë°ì´í„° ë™ê¸°í™”**: ë°ì´í„° ë³€ê²½ ì‹œ ìë™ UI ì—…ë°ì´íŠ¸
3. **í™˜ê²½ ê³µìœ **: ë¶€ëª¨-ìì‹ View ê°„ ë°ì´í„° ì „ë‹¬
4. **ì‹œìŠ¤í…œ í†µí•©**: í¬ì»¤ìŠ¤, ë°ì´í„°ë² ì´ìŠ¤ ë“±ê³¼ ì—°ë™

### ê° Property Wrapperì˜ ë°ì´í„° ì¶œì²˜

| Property Wrapper | ë°ì´í„° ì¶œì²˜ | ì´ˆê¸°ê°’ | ìš©ë„ |
|-----------------|------------|--------|------|
| @State | ìš°ë¦¬ê°€ ìƒì„±/ê´€ë¦¬ | í•„ìˆ˜ | ë¡œì»¬ ìƒíƒœ |
| @Environment | ì‹œìŠ¤í…œ/ë¶€ëª¨ View | ë¶ˆê°€ | í™˜ê²½ ê°’ ì ‘ê·¼ |
| @Query | ë°ì´í„°ë² ì´ìŠ¤ | ë¶ˆê°€ | ë°ì´í„° ìë™ ì¡°íšŒ |
| @FocusState | ì‹œìŠ¤í…œ ì¶”ì  | ë¶ˆê°€ | í¬ì»¤ìŠ¤ ì œì–´ |

## 8. ì¶”ê°€ í•™ìŠµ ìë£Œ

- [Apple Developer Documentation - Property Wrappers](https://docs.swift.org/swift-book/LanguageGuide/Properties.html#ID617)
- [SwiftUI Property Wrappers](https://developer.apple.com/documentation/swiftui/state-and-data-flow)
- [SwiftData @Query](https://developer.apple.com/documentation/swiftdata/query)

---

*ì´ ë¬¸ì„œëŠ” SwiftUI Property Wrapperì— ëŒ€í•œ ì‹¬ì¸µ í•™ìŠµ ì„¸ì…˜ì˜ ì •ë¦¬ì…ë‹ˆë‹¤.*
*ì‹¤ì œ ì½”ë“œì™€ ì‹¤í—˜ì„ í†µí•´ ê° ê°œë…ì„ íƒêµ¬í•˜ê³  ì´í•´í–ˆìŠµë‹ˆë‹¤.*
