# Daily Learning: 2025-02-02

## 📚 What I Learned Today
- 채팅 시스템 설계
    - 채팅을 위한 클라이언트와 서버간의 통신 방법
        - 일반적인 HTTP 통신을 통해서는 클라이언트 -> 서버 로의 단방향의 통신이 일반적이다. 하지만 채팅의 경우 전달받은 메시지를 수신자 클라이언트에게 전달해야하기 때문에 서버 -> 클라이언트로의 통신이 필요하다.
        - 이에대한 대안으로 폴링, 롱 폴링, 웹소켓 등이 활용된다. 폴링, 롱 폴링의 경우 자원의 낭비가 지속적으로 발생할 수 있어 보통 웹소켓을 많이 사용한다.
        - 웹 소켓은 HTTP 핸드셰이크를 통해 웹소켓 연결로 업그레이드 된다. 이 연결은 항구적이고 양방향 통신이 가능하다.
    - 상태, 무상태 서비스
        - 채팅 서버는 웹소켓을 활용한 통신을 하기 때문에 상태가 유지되어야 하는 서비스이다. 클라이언트와 채팅 서버가 독립적인 네트워크 연결을 유지한다. 서버가 살아있는 한 다른 서버로 연결을 변경하지 않는다.
        - 이외의 일반적인 로그인, 회원가입 등의 서비스들은 무상태 서비스로 제공하는경우가 일반적이다.
    - 저장소
        - 사용자 정보, 친구 목록등의 일반적인 데이터는 관계형 데이터베이스에 보관한다.
        - 채팅 이력과 같은 채팅 시스템에 고유한 데이터는 키-값 저장소를 많이 사용한다.
    - 메시지 ID
        - 전역적으로 유일한 ID 를 생성하는 방법을 사용할 수 있다.
    - 서비스 탐색
        - 클라이언트와 연결한 적절한 채팅 서버를 알려주기 위해 서비스 탐색 서비스를 제공한다. 이 서비스는 사전에 정한 기준에 따라 최적의 채팅 서버를 골라준다.
    - 메시지 흐름
        - 발신자 -> 채팅서버 -> 메시지 동기화 큐 -> 채팅서버 or 알림서버 -> 수신자
